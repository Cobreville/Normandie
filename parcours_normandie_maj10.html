<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>Carte trajet vélo</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css"/>
<script src="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js"></script>
<style>
    html, body { margin: 0; padding: 0; height: 100%; }
    #map { width: 100%; height: 100%; }
    .marker-number {
        background-color: #007bff;
        color: white;
        font-size: 12px;
        font-weight: bold;
        text-align: center;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        line-height: 24px;
        border: 2px solid white;
        box-shadow: 0 0 3px rgba(0,0,0,0.5);
    }
</style>
</head>
<body>
<div id="map"></div>
<script>
    // Initialisation de la carte
    var map = L.map('map').setView([49.4, 2.1], 8);

    // Fond de carte
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: '© OpenStreetMap',
        maxZoom: 18
    }).addTo(map);

    // Tableau des étapes [latitude, longitude, nom]
    var etapes = [
        [49.91053162783799, 5.614353026010077, "Jour 1 - Départ - Cobreville"],
        [49.954171212684074, 5.190907610672605, "Jour 1 - Maissin"],
        [50.071394521778295, 4.475001854852405, "Jour 2 - Boussu en Fagnes"],
        [49.9435699563075, 4.088455526011609, "Jour 3 - Hirson"],
        [49.89516946155582, 3.633671725485105, "Jour 4 - Guise"],
        [49.5887282784756, 3.043829497160381, "Jour 5 - Salency"],
        [49.318030439251835, 2.48567571248747, "Jour 6 - Angicourt"],
        [49.069196561069745, 1.9647620817970939, "Jour 7 - La Villeneuve Saint Martin"],
        [49.403156, 1.481815, "Jour 8 - Lyons-la-Forêt"],
        [49.241547, 0.703205, "Jour 9 - Pont-Authou"]
    ];

    // Ajout des marqueurs avec numéros commençant à 0
    etapes.forEach(function(e, i) {
        var icon = L.divIcon({
            className: 'marker-number',
            html: i, // commence à 0
            iconSize: [24, 24],
            iconAnchor: [12, 12]
        });

        L.marker([e[0], e[1]], {icon: icon})
            .addTo(map)
            .bindPopup(e[2])
            .bindTooltip(e[2].split(" - ")[e[2].split(" - ").length-1], {sticky: true});
    });

    // Tracé de la ligne bleue
    var coords = etapes.map(function(e) { return [e[0], e[1]]; });
    L.polyline(coords, { color: "blue", weight: 3 }).addTo(map);
</script>
</body>
</html>
